#!/bin/bash

layers_list="hydrografi \
    militartomrade \
    administrativindelning \
    kommunikation \
    naturvard \
    anlaggningsomrade \
    kulturhistorisklamning \
    norrapolcirkeln \
    byggnadsverk \
    ledningar \
    text \
    hojd \
    mark"

for LAYER in $layers_list; do
    LAYERNAME=$LAYER"_sverige"
    INPUT="$LAYERNAME.gpkg"
    OUTPUT="$LAYER.gpkg"
    if [ -f $LAYERNAME.zip ]; then
        echo $LAYER
        # unzip
        if [ ! -f $INPUT ]; then
            unzip $LAYERNAME.zip
            rm $LAYERNAME.zip
        fi
        # convert
        if [ ! -f $OUTPUT ]; then
            ogr2ogr $OUTPUT \
            -t_srs "EPSG:3857" \
            -progress \
            $INPUT
            rm $INPUT
        fi
    fi
done

# Trans Euro Trail
wget https://transeurotrail.org/wp-content/uploads/gpxsync/S.gpx -O $HOME/Karta/DIV/S.gpx
ogr2ogr $HOME/Karta/DIV/TET.gpkg \
-t_srs "EPSG:3857" \
-progress \
-overwrite \
-nln "TET" \
$HOME/Karta/DIV/S.gpx \
tracks